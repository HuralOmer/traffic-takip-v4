# Git Branch Koruması Stratejisi

## Ana Prensip
**MAIN BRANCH ASLA BOZMA!**

## Branch Stratejisi

### 1. Main Branch (PROTECTED)
```bash
# Ana branch - SADECE TEKRAR ÇALIŞTIĞINI GARANTİ ETTİĞİNİZ KOD
git checkout main
git branch --set-upstream-to=origin/main main
```

### 2. Development Branch
```bash
# Aktif geliştirme - Burası bileşik test edildiğinde main'e merge edilir
git checkout -b development
git push -u origin development
```

### 3. Feature Branch Pattern
```bash
# YENİ MODÜL EKLERKEN:
git checkout main
git checkout -b feature/new-module-name
# Geliştir...
# Test et...
# ÇALIŞTIĞINDA main'e merge et
```

## Güvenli Geliştirme Akışı

### Senaryo 1: Active Users Modülünde Çalışırken Yeni Modül Ekleme

1. **Çalışan durumun snapshot'ını al:**
```bash
git stash push -m "working-state-before-new-module"
git stash list  # ID'yi not et
```

2. **Yeni modül için branch aç:**
```bash
git checkout main
git checkout -b feature/new-module-name
```

3. **Yeni modülü ekle**

4. **Test et ve çalıştığını garantile**

5. **Eski duruma dön if needed:**
```bash
git checkout development  # veya main
git stash apply stash@{id}  # İD'yi yukarıdaki komuttan aldın
```

## Önemli Komutlar

### Çalışan Kodu Koruma
```bash
# 1. Şu anki durumu snapshot olarak kaydet
git stash push -m "working-state-$(Get-Date -Format 'yyyy-MM-dd')"

# 2. Listele
git stash list

# 3. Geri al
git stash apply stash@{0}

# 4. Geri al ve sil (apply + drop)
git stash pop stash@{0}
```

### Güvenli Geri Dönüş
```bash
# Son commit'i geri al (değişiklikleri koru)
git reset --soft HEAD~1

# Tamamen geri dön (DİKKAT: Değişiklikleri SİLER)
git reset --hard HEAD~1

# Belirli bir commit'e geri dön
git reset --hard <commit-hash>
```

### Ana Branch'i Korumak İçin
```bash
# main branch'e yazmayı engelle
git config --global branch.main.mergeoptions "--no-ff"
```

## Acil Durum Komutları

```bash
# 1. NEREYDESİN bakalım
git status
git log --oneline -10

# 2. ÇALIŞAN KODA DÖN (son commit öncesi)
git reset --hard origin/main

# 3. TÜM DEĞİŞİKLİKLERİ SİL VE MAİN'E DÖN
git checkout main
git reset --hard HEAD
git clean -fd

# 4. STASH'te BİR ŞEY VAR MI?
git stash list

# 5. STASH'İ GERİ AL
git stash apply
```

## BEST PRACTICE

1. **Her yeni modül öncesi:**
   - Main'den branch aç
   - Tamamlanıp test edilene kadar main'e dokunma

2. **Her gün başlangıcında:**
   - Main'i pull et
   - Geliştirme yap

3. **Her gün bitişinde:**
   - Değişiklikleri commit et
   - Çalışan bir durumu garanti et

4. **Acil durum:**
   - Main'e dön: `git checkout main`
   - Temizle: `git reset --hard origin/main`

